<!doctype html>
<html>

<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
    crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"
    crossorigin="anonymous"></script>

  <title>Socket.IO chat</title>
  <style>
    .card-deck {
      background-color: grey;
      margin: 10px;
      height: 150px;
      width: 100%;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="row align-items-center">
      <h1>It's Schätz-Time!!!</h1> -
      <h2 id="roomCode">0000</h2>
      <div class="btn btn-warning" id="reset">Neu schätzen</div>
    </div>
    <div class="card-container"></div>
  </div>
  <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/holder/2.9.4/holder.js"></script>
  <script>
    $(function () {
      var socket = io();
      var sizes = ['Training', 'Amateur', 'Semi-Pro', 'Pro', 'World-Class', 'Legendary'];

      var roomCode = prompt("enter a room code", "12345");
      if (roomCode) {
        $('#roomCode').html(roomCode);
        socket.emit('room', roomCode);
      }

      socket.on('card draw', function (msg) {
        $('#card-deck-' + msg.card_value).append(
          '<div class="col-md-2">\
            <div class="card">\
              <img class="card-img-top" src="'+ msg.url + '" alt="Card image cap">\
              <p class="center">'+ msg.name + '</p>\
            </div >\
          </div > '
        );
      });

      drawNew()


      $('#reset').click(function () {
        socket.emit('card reset');
        drawNew();
      });

      function drawNew() {
        $('.card-container').empty();
        $(sizes).each(function (i, size) {
          $('.card-container').append(
            '<div class="row card-deck" id="card-deck-' + size + '">\
            <div class="col-md-2">'+ size + '</div>\
            </div>'
          );
        })
      };
    });
  </script>
</body>

</html>